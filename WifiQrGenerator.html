 <!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de QR para WiFi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
            max-width: 600px;
            width: 100%;
            margin-bottom: 30px;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .qr-container {
            display: none;
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 12px;
        }

        .qr-container.active {
            display: block;
        }

        #qrcode {
            display: inline-block;
            padding: 20px;
            background: white;
            border-radius: 12px;
            margin: 20px 0;
        }

        .wifi-info {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .wifi-info p {
            margin: 8px 0;
            color: #333;
            font-size: 16px;
        }

        .wifi-info strong {
            color: #667eea;
        }

        .print-controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .print-controls button {
            flex: 1;
            min-width: 120px;
        }

        .btn-print {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .btn-print:hover {
            box-shadow: 0 5px 15px rgba(17, 153, 142, 0.4);
        }

        @media print {
            body {
                background: white;
                padding: 0;
                margin: 0;
            }

            .container {
                box-shadow: none;
                max-width: 100%;
                padding: 20mm;
                margin: 0;
                border-radius: 0;
            }

            .form-group, button, .print-controls, h1 {
                display: none;
            }

            .qr-container {
                display: block !important;
                background: white;
                page-break-inside: avoid;
                padding: 0;
                margin: 0;
            }

            #qrcode {
                margin: 20px auto;
                padding: 20px;
            }

            #qrcode canvas {
                max-width: 100%;
                height: auto;
            }

            .wifi-info {
                page-break-inside: avoid;
                margin-top: 30px;
                font-size: 18px;
                border-left: none !important;
            }

            .wifi-info p {
                font-size: 18px;
                margin: 12px 0;
            }

            /* Estilos para diferentes tama√±os de papel */
            .page-a4 .container {
                width: 210mm;
                min-height: 297mm;
            }

            .page-a5 .container {
                width: 148mm;
                min-height: 210mm;
            }

            .page-letter .container {
                width: 8.5in;
                min-height: 11in;
            }

            @page {
                size: auto;
                margin: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì∂ Generador de QR para WiFi</h1>
        
        <form id="wifiForm">
            <div class="form-group">
                <label for="ssid">Nombre de la red (SSID):</label>
                <input type="text" id="ssid" required placeholder="Ej: MiWiFi">
            </div>

            <div class="form-group">
                <label for="password">Contrase√±a:</label>
                <input type="text" id="password" required placeholder="Contrase√±a de la WiFi">
            </div>

            <div class="form-group">
                <label for="security">Tipo de seguridad:</label>
                <select id="security">
                    <option value="WPA3">WPA3</option>
                    <option value="WPA">WPA/WPA2</option>
                    <option value="WEP">WEP</option>
                    <option value="nopass">Sin contrase√±a</option>
                </select>
            </div>

            <div class="form-group">
                <div class="checkbox-group">
                    <input type="checkbox" id="hidden">
                    <label for="hidden">Red oculta</label>
                </div>
            </div>

            <button type="submit">Generar QR Code</button>
        </form>

        <div class="qr-container" id="qrContainer">
            <div id="qrcode"></div>
            <div class="wifi-info" id="wifiInfo"></div>
            
            <div class="print-controls">
                <label for="paperSize" style="width: 100%; margin-bottom: 10px; display: block;">
                    <strong>Tama√±o de papel para imprimir:</strong>
                </label>
                <select id="paperSize" style="width: 100%; margin-bottom: 10px;">
                    <option value="A4">A4 (210 √ó 297 mm)</option>
                    <option value="A5">A5 (148 √ó 210 mm)</option>
                    <option value="letter">Letter (8.5 √ó 11 in)</option>
                </select>
                <button type="button" class="btn-print" onclick="printQR()">üñ®Ô∏è Imprimir QR</button>
            </div>
        </div>
    </div>

    <script>
        // Implementaci√≥n completa de QR Code Generator (sin dependencias externas)
        // Basado en el algoritmo est√°ndar QR Code
        (function() {
            'use strict';
            
            var QRCode = function(el, options) {
                this.element = typeof el === 'string' ? document.getElementById(el) : el;
                this.options = {
                    text: options.text || '',
                    width: options.width || 256,
                    height: options.height || 256,
                    colorDark: options.colorDark || '#000000',
                    colorLight: options.colorLight || '#ffffff',
                    correctLevel: options.correctLevel || QRCode.CorrectLevel.M
                };
                this.makeCode(this.options.text);
            };
            
            QRCode.CorrectLevel = { L: 1, M: 0, Q: 3, H: 2 };
            
            QRCode.prototype.makeCode = function(text) {
                this.element.innerHTML = '';
                var qrCode = this.generateQRCode(text);
                if (!qrCode || !qrCode.length) {
                    throw new Error('No se pudo generar el QR code. El resultado es inv√°lido.');
                }
                this.render(qrCode);
            };
            
            QRCode.prototype.generateQRCode = function(text) {
                var correctLevel = QRCode.CorrectLevel[this.options.correctLevel] || 0;
                
                // Intentar con diferentes tipos hasta encontrar uno que funcione
                var typeNumber = 1;
                var maxAttempts = 10;
                var lastError = null;
                
                for (var attempt = 1; attempt <= maxAttempts; attempt++) {
                    try {
                        typeNumber = attempt;
                        var qr = qrcode(typeNumber, correctLevel);
                        qr.addData(text);
                        qr.make();
                        return qr.modules;
                    } catch (e) {
                        lastError = e;
                        // Si el error es de overflow, intentar con un tipo mayor
                        if (e.message && e.message.indexOf('overflow') !== -1) {
                            continue;
                        }
                        // Si es otro error, lanzarlo
                        throw e;
                    }
                }
                
                // Si llegamos aqu√≠, todos los intentos fallaron
                throw new Error('No se pudo generar el QR code. Texto demasiado largo o error: ' + (lastError ? lastError.message : 'desconocido'));
            };
            
            QRCode.prototype.render = function(modules) {
                if (!modules || !modules.length) {
                    throw new Error('M√≥dulos de QR code inv√°lidos');
                }
                var canvas = document.createElement('canvas');
                var ctx = canvas.getContext('2d');
                var size = this.options.width;
                canvas.width = size;
                canvas.height = size;
                var tileW = size / modules.length;
                var tileH = size / modules.length;
                
                for (var row = 0; row < modules.length; row++) {
                    if (!modules[row] || !modules[row].length) continue;
                    for (var col = 0; col < modules[row].length; col++) {
                        ctx.fillStyle = modules[row][col] ? this.options.colorDark : this.options.colorLight;
                        ctx.fillRect(col * tileW, row * tileH, tileW, tileH);
                    }
                }
                this.element.appendChild(canvas);
            };
            
            // Algoritmo QR Code completo (inline)
            function qrcode(typeNumber, errorCorrectLevel) {
                var PAD0 = 0xEC;
                var PAD1 = 0x11;
                
                var _typeNumber = typeNumber;
                var _errorCorrectLevel = errorCorrectLevel;
                var _modules = null;
                var _moduleCount = 0;
                var _dataCache = null;
                var _dataList = [];
                
                var _this = {};
                
                _this.addData = function(data) {
                    var newData = qrcode.stringToBytes(data);
                    _dataList.push(newData);
                    _dataCache = null;
                };
                
                _this.isDark = function(row, col) {
                    if (row < 0 || _moduleCount <= row || col < 0 || _moduleCount <= col) {
                        throw new Error(row + ',' + col);
                    }
                    return _modules[row][col];
                };
                
                _this.getModuleCount = function() {
                    return _moduleCount;
                };
                
                _this.make = function() {
                    _makeImpl(false, _getBestMaskPattern());
                    _this.modules = _modules;
                };
                
                function _makeImpl(test, maskPattern) {
                    _moduleCount = _typeNumber * 4 + 17;
                    _modules = function(moduleCount) {
                        var modules = new Array(moduleCount);
                        for (var row = 0; row < moduleCount; row++) {
                            modules[row] = new Array(moduleCount);
                            for (var col = 0; col < moduleCount; col++) {
                                modules[row][col] = null;
                            }
                        }
                        return modules;
                    }(_moduleCount);
                    
                    _setupPositionProbePattern(0, 0);
                    _setupPositionProbePattern(_moduleCount - 7, 0);
                    _setupPositionProbePattern(0, _moduleCount - 7);
                    _setupPositionAdjustPattern();
                    _setupTimingPattern();
                    _setupTypeInfo(test, maskPattern);
                    
                    if (_typeNumber >= 7) {
                        _setupTypeNumber(test);
                    }
                    
                    if (_dataCache == null) {
                        _dataCache = qrcode.createData(_typeNumber, _errorCorrectLevel, _dataList);
                    }
                    
                    _mapData(_dataCache, maskPattern);
                }
                
                function _setupPositionProbePattern(row, col) {
                    for (var r = -1; r <= 7; r++) {
                        if (row + r <= -1 || _moduleCount <= row + r) continue;
                        for (var c = -1; c <= 7; c++) {
                            if (col + c <= -1 || _moduleCount <= col + c) continue;
                            if ((0 <= r && r <= 6 && (c == 0 || c == 6)) ||
                                (0 <= c && c <= 6 && (r == 0 || r == 6)) ||
                                (2 <= r && r <= 4 && 2 <= c && c <= 4)) {
                                _modules[row + r][col + c] = true;
                            } else {
                                _modules[row + r][col + c] = false;
                            }
                        }
                    }
                }
                
                function _getBestMaskPattern() {
                    var minLostPoint = 0;
                    var pattern = 0;
                    for (var i = 0; i < 8; i++) {
                        _makeImpl(true, i);
                        var lostPoint = _getLostPoint();
                        if (i == 0 || minLostPoint > lostPoint) {
                            minLostPoint = lostPoint;
                            pattern = i;
                        }
                    }
                    return pattern;
                }
                
                function _getLostPoint() {
                    var lostPoint = 0;
                    var moduleCount = _moduleCount;
                    for (var row = 0; row < moduleCount; row++) {
                        for (var col = 0; col < moduleCount; col++) {
                            var sameCount = 0;
                            var dark = _modules[row][col];
                            for (var r = -1; r <= 1; r++) {
                                if (row + r < 0 || moduleCount <= row + r) continue;
                                for (var c = -1; c <= 1; c++) {
                                    if (col + c < 0 || moduleCount <= col + c) continue;
                                    if (r == 0 && c == 0) continue;
                                    if (dark == _modules[row + r][col + c]) {
                                        sameCount++;
                                    }
                                }
                            }
                            if (sameCount > 5) {
                                lostPoint += (3 + sameCount - 5);
                            }
                        }
                    }
                    return lostPoint;
                }
                
                function _setupTimingPattern() {
                    for (var r = 8; r < _moduleCount - 8; r++) {
                        if (_modules[r][6] != null) continue;
                        _modules[r][6] = (r % 2 == 0);
                    }
                    for (var c = 8; c < _moduleCount - 8; c++) {
                        if (_modules[6][c] != null) continue;
                        _modules[6][c] = (c % 2 == 0);
                    }
                }
                
                function _setupPositionAdjustPattern() {
                    var pos = qrcode.getPatternPosition(_typeNumber);
                    for (var i = 0; i < pos.length; i++) {
                        for (var j = 0; j < pos.length; j++) {
                            var row = pos[i];
                            var col = pos[j];
                            if (_modules[row][col] != null) continue;
                            for (var r = -2; r <= 2; r++) {
                                for (var c = -2; c <= 2; c++) {
                                    if (r == -2 || r == 2 || c == -2 || c == 2 || (r == 0 && c == 0)) {
                                        _modules[row + r][col + c] = true;
                                    } else {
                                        _modules[row + r][col + c] = false;
                                    }
                                }
                            }
                        }
                    }
                }
                
                function _setupTypeNumber(test) {
                    var bits = qrcode.getBCHTypeNumber(_typeNumber);
                    for (var i = 0; i < 18; i++) {
                        var mod = (!test && ((bits >> i) & 1) == 1);
                        _modules[Math.floor(i / 3)][i % 3 + _moduleCount - 8 - 3] = mod;
                    }
                    for (var i = 0; i < 18; i++) {
                        var mod = (!test && ((bits >> i) & 1) == 1);
                        _modules[i % 3 + _moduleCount - 8 - 3][Math.floor(i / 3)] = mod;
                    }
                }
                
                function _setupTypeInfo(test, maskPattern) {
                    var data = (_errorCorrectLevel << 3) | maskPattern;
                    var bits = qrcode.getBCHTypeInfo(data);
                    for (var i = 0; i < 15; i++) {
                        var mod = (!test && ((bits >> i) & 1) == 1);
                        if (i < 6) {
                            _modules[i][8] = mod;
                        } else if (i < 8) {
                            _modules[i + 1][8] = mod;
                        } else {
                            _modules[_moduleCount - 15 + i][8] = mod;
                        }
                    }
                    for (var i = 0; i < 15; i++) {
                        var mod = (!test && ((bits >> i) & 1) == 1);
                        if (i < 8) {
                            _modules[8][_moduleCount - i - 1] = mod;
                        } else if (i < 9) {
                            _modules[8][15 - i - 1 + 1] = mod;
                        } else {
                            _modules[8][15 - i - 1] = mod;
                        }
                    }
                    _modules[_moduleCount - 8][8] = (!test);
                }
                
                function _mapData(data, maskPattern) {
                    var inc = -1;
                    var row = _moduleCount - 1;
                    var bitIndex = 7;
                    var byteIndex = 0;
                    for (var col = _moduleCount - 1; col > 0; col -= 2) {
                        if (col == 6) col--;
                        while (true) {
                            for (var c = 0; c < 2; c++) {
                                if (_modules[row][col - c] == null) {
                                    var dark = false;
                                    if (byteIndex < data.length) {
                                        dark = (((data[byteIndex] >>> bitIndex) & 1) == 1);
                                    }
                                    var mask = qrcode.getMask(maskPattern, row, col - c);
                                    if (mask) {
                                        dark = !dark;
                                    }
                                    _modules[row][col - c] = dark;
                                    bitIndex--;
                                    if (bitIndex == -1) {
                                        byteIndex++;
                                        bitIndex = 7;
                                    }
                                }
                            }
                            row += inc;
                            if (row < 0 || _moduleCount <= row) {
                                row -= inc;
                                inc = -inc;
                                break;
                            }
                        }
                    }
                }
                
                // modules se establecer√° despu√©s de llamar a make()
                _this.modules = null;
                return _this;
            }
            
            qrcode.stringToBytes = function(s) {
                var bytes = [];
                for (var i = 0; i < s.length; i++) {
                    var c = s.charCodeAt(i);
                    if (c < 0x80) {
                        bytes.push(c);
                    } else if (c < 0x800) {
                        bytes.push(0xC0 | (c >> 6));
                        bytes.push(0x80 | (c & 0x3F));
                    } else if ((c & 0xFC00) == 0xD800 && (i + 1) < s.length && (s.charCodeAt(i + 1) & 0xFC00) == 0xDC00) {
                        c = 0x10000 + ((c & 0x03FF) << 10) + (s.charCodeAt(++i) & 0x03FF);
                        bytes.push(0xF0 | (c >> 18));
                        bytes.push(0x80 | ((c >> 12) & 0x3F));
                        bytes.push(0x80 | ((c >> 6) & 0x3F));
                        bytes.push(0x80 | (c & 0x3F));
                    } else {
                        bytes.push(0xE0 | (c >> 12));
                        bytes.push(0x80 | ((c >> 6) & 0x3F));
                        bytes.push(0x80 | (c & 0x3F));
                    }
                }
                return bytes;
            };
            
            qrcode.createData = function(typeNumber, errorCorrectLevel, dataList) {
                var rsBlocks = qrcode.getRSBlocks(typeNumber, errorCorrectLevel);
                var buffer = qrcode.bitBuffer();
                for (var i = 0; i < dataList.length; i++) {
                    var data = dataList[i];
                    buffer.put(4, 4);
                    buffer.put(data.length, qrcode.getLengthInBits(4, typeNumber));
                    for (var j = 0; j < data.length; j++) {
                        buffer.put(data[j], 8);
                    }
                }
                var totalDataCount = 0;
                for (var i = 0; i < rsBlocks.length; i++) {
                    totalDataCount += rsBlocks[i].dataCount;
                }
                if (buffer.getLengthInBits() > totalDataCount * 8) {
                    throw new Error('code length overflow. (' + buffer.getLengthInBits() + '>' + totalDataCount * 8 + ')');
                }
                if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {
                    buffer.put(0, 4);
                }
                while (buffer.getLengthInBits() % 8 != 0) {
                    buffer.putBit(false);
                }
                while (true) {
                    if (buffer.getLengthInBits() >= totalDataCount * 8) {
                        break;
                    }
                    buffer.put(0xEC, 8);
                    if (buffer.getLengthInBits() >= totalDataCount * 8) {
                        break;
                    }
                    buffer.put(0x11, 8);
                }
                return qrcode.createBytes(buffer, rsBlocks);
            };
            
            qrcode.createBytes = function(buffer, rsBlocks) {
                var offset = 0;
                var maxDcCount = 0;
                var maxEcCount = 0;
                var dcdata = new Array(rsBlocks.length);
                var ecdata = new Array(rsBlocks.length);
                for (var r = 0; r < rsBlocks.length; r++) {
                    var dcCount = rsBlocks[r].dataCount;
                    var ecCount = rsBlocks[r].totalCount - dcCount;
                    maxDcCount = Math.max(maxDcCount, dcCount);
                    maxEcCount = Math.max(maxEcCount, ecCount);
                    dcdata[r] = new Array(dcCount);
                    for (var i = 0; i < dcdata[r].length; i++) {
                        dcdata[r][i] = 0xff & buffer.buffer[i + offset];
                    }
                    offset += dcCount;
                    var rsPoly = qrcode.getErrorCorrectPolynomial(ecCount);
                    var rawPoly = qrcode.polynomial(dcdata[r], rsPoly.getLength() - 1);
                    var modPoly = rawPoly.mod(rsPoly);
                    ecdata[r] = new Array(rsPoly.getLength() - 1);
                    for (var i = 0; i < ecdata[r].length; i++) {
                        var modIndex = i + modPoly.getLength() - ecdata[r].length;
                        ecdata[r][i] = (modIndex >= 0) ? modPoly.getAt(modIndex) : 0;
                    }
                }
                var totalCodeCount = 0;
                for (var i = 0; i < rsBlocks.length; i++) {
                    totalCodeCount += rsBlocks[i].totalCount;
                }
                var data = new Array(totalCodeCount);
                var index = 0;
                for (var i = 0; i < maxDcCount; i++) {
                    for (var r = 0; r < rsBlocks.length; r++) {
                        if (i < dcdata[r].length) {
                            data[index++] = dcdata[r][i];
                        }
                    }
                }
                for (var i = 0; i < maxEcCount; i++) {
                    for (var r = 0; r < rsBlocks.length; r++) {
                        if (i < ecdata[r].length) {
                            data[index++] = ecdata[r][i];
                        }
                    }
                }
                return data;
            };
            
            qrcode.getLengthInBits = function(mode, type) {
                if (1 <= type && type < 10) {
                    switch(mode) {
                        case 4: return 8;
                        case 8: return 8;
                        default: throw new Error('mode:' + mode);
                    }
                } else if (type < 27) {
                    switch(mode) {
                        case 4: return 16;
                        case 8: return 16;
                        default: throw new Error('mode:' + mode);
                    }
                } else if (type < 41) {
                    switch(mode) {
                        case 4: return 16;
                        case 8: return 16;
                        default: throw new Error('mode:' + mode);
                    }
                } else {
                    throw new Error('type:' + type);
                }
            };
            
            qrcode.getRSBlocks = function(typeNumber, errorCorrectLevel) {
                var rsBlock = qrcode.getRsBlockTable(typeNumber, errorCorrectLevel);
                if (rsBlock == undefined) {
                    throw new Error('bad rs block @ typeNumber:' + typeNumber + '/errorCorrectLevel:' + errorCorrectLevel);
                }
                var length = rsBlock.length / 3;
                var list = [];
                for (var i = 0; i < length; i++) {
                    var count = rsBlock[i * 3 + 0];
                    var totalCount = rsBlock[i * 3 + 1];
                    var dataCount = rsBlock[i * 3 + 2];
                    for (var j = 0; j < count; j++) {
                        list.push({totalCount: totalCount, dataCount: dataCount});
                    }
                }
                return list;
            };
            
            qrcode.getRsBlockTable = function(typeNumber, errorCorrectLevel) {
                switch(errorCorrectLevel) {
                    case 1: return qrcode.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];
                    case 0: return qrcode.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];
                    case 3: return qrcode.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];
                    case 2: return qrcode.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];
                    default: return undefined;
                }
            };
            
            qrcode.RS_BLOCK_TABLE = [
                [1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9],
                [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16],
                [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13],
                [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9],
                [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12],
                [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15],
                [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14],
                [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15],
                [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13],
                [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16],
                [4, 101, 81], [1, 80, 50, 4, 81, 51], [4, 50, 22, 4, 51, 23], [3, 36, 12, 8, 37, 13],
                [2, 116, 92, 2, 117, 93], [6, 58, 36, 2, 59, 37], [4, 46, 20, 6, 47, 21], [7, 42, 14, 4, 43, 15],
                [4, 133, 107], [8, 59, 37, 1, 60, 38], [8, 44, 20, 4, 45, 21], [12, 33, 11, 4, 34, 12],
                [3, 145, 115, 1, 146, 116], [4, 64, 40, 5, 65, 41], [11, 36, 16, 5, 37, 17], [11, 36, 12, 5, 37, 13],
                [5, 109, 87, 1, 110, 88], [5, 65, 41, 5, 66, 42], [5, 54, 24, 7, 55, 25], [11, 36, 12],
                [5, 122, 98, 1, 123, 99], [7, 73, 45, 3, 74, 46], [15, 43, 19, 2, 44, 20], [3, 45, 15, 13, 46, 16],
                [1, 135, 107, 5, 136, 108], [10, 74, 46, 1, 75, 47], [1, 50, 22, 15, 51, 23], [2, 42, 14, 17, 43, 15],
                [5, 150, 120, 1, 151, 121], [9, 69, 43, 4, 70, 44], [17, 50, 22, 1, 51, 23], [2, 42, 14, 19, 43, 15],
                [3, 141, 113, 4, 142, 114], [3, 70, 44, 11, 71, 45], [17, 47, 21, 4, 48, 22], [9, 39, 13, 16, 40, 14],
                [3, 135, 107, 5, 136, 108], [3, 67, 41, 13, 68, 42], [15, 54, 24, 5, 55, 25], [15, 43, 15, 10, 44, 16],
                [4, 144, 116, 4, 145, 117], [17, 68, 42], [17, 50, 22, 6, 51, 23], [19, 46, 16, 6, 47, 17],
                [2, 139, 111, 7, 140, 112], [17, 74, 46], [7, 54, 24, 16, 55, 25], [34, 37, 13],
                [4, 151, 121, 5, 152, 122], [4, 75, 47, 14, 76, 48], [11, 54, 24, 14, 55, 25], [16, 45, 15, 14, 46, 16],
                [6, 147, 117, 4, 148, 118], [6, 73, 45, 14, 74, 46], [11, 54, 24, 16, 55, 25], [30, 46, 16, 2, 47, 17],
                [8, 132, 106, 4, 133, 107], [8, 75, 47, 13, 76, 48], [7, 54, 24, 22, 55, 25], [22, 45, 15, 13, 46, 16],
                [10, 142, 114, 2, 143, 115], [19, 74, 46, 4, 75, 47], [28, 50, 22, 6, 51, 23], [33, 46, 16, 4, 47, 17],
                [8, 152, 122, 4, 153, 123], [22, 73, 45, 3, 74, 46], [8, 53, 23, 26, 54, 24], [12, 45, 15, 28, 46, 16],
                [3, 147, 117, 10, 148, 118], [3, 73, 45, 23, 74, 46], [4, 54, 24, 31, 55, 25], [11, 45, 15, 31, 46, 16],
                [7, 146, 116, 7, 147, 117], [21, 73, 45, 7, 74, 46], [1, 53, 23, 37, 54, 24], [19, 45, 15, 26, 46, 16],
                [5, 145, 115, 10, 146, 116], [19, 75, 47, 10, 76, 48], [15, 54, 24, 25, 55, 25], [23, 45, 15, 25, 46, 16],
                [13, 145, 115, 3, 146, 116], [2, 74, 46, 29, 75, 47], [42, 54, 24, 1, 55, 25], [23, 45, 15, 28, 46, 16],
                [17, 145, 115], [10, 74, 46, 23, 75, 47], [10, 54, 24, 35, 55, 25], [19, 45, 15, 35, 46, 16],
                [17, 145, 115, 1, 146, 116], [14, 74, 46, 21, 75, 47], [29, 54, 24, 19, 55, 25], [11, 45, 15, 46, 46, 16],
                [13, 145, 115, 6, 146, 116], [14, 74, 46, 23, 75, 47], [44, 54, 24, 7, 55, 25], [59, 46, 16, 1, 47, 17],
                [12, 151, 121, 7, 152, 122], [12, 75, 47, 26, 76, 48], [39, 54, 24, 14, 55, 25], [22, 45, 15, 41, 46, 16],
                [6, 151, 121, 14, 152, 122], [6, 75, 47, 34, 76, 48], [46, 54, 24, 10, 55, 25], [2, 45, 15, 64, 46, 16],
                [17, 152, 122, 4, 153, 123], [29, 74, 46, 14, 75, 47], [49, 54, 24, 10, 55, 25], [24, 45, 15, 46, 46, 16],
                [4, 152, 122, 18, 153, 123], [13, 74, 46, 32, 75, 47], [48, 54, 24, 14, 55, 25], [42, 45, 15, 32, 46, 16],
                [20, 147, 117, 4, 148, 118], [40, 75, 47, 7, 76, 48], [43, 54, 24, 22, 55, 25], [10, 45, 15, 67, 46, 16],
                [19, 148, 118, 6, 149, 119], [18, 75, 47, 31, 76, 48], [34, 54, 24, 34, 55, 25], [20, 45, 15, 61, 46, 16]
            ];
            
            qrcode.getMask = function(maskPattern, i, j) {
                switch (maskPattern) {
                    case 0: return (i + j) % 2 == 0;
                    case 1: return i % 2 == 0;
                    case 2: return j % 3 == 0;
                    case 3: return (i + j) % 3 == 0;
                    case 4: return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;
                    case 5: return (i * j) % 2 + (i * j) % 3 == 0;
                    case 6: return ((i * j) % 2 + (i * j) % 3) % 2 == 0;
                    case 7: return ((i * j) % 3 + (i + j) % 2) % 2 == 0;
                    default: throw new Error('bad maskPattern:' + maskPattern);
                }
            };
            
            qrcode.getErrorCorrectPolynomial = function(errorCorrectLength) {
                var a = qrcode.polynomial([1], 0);
                for (var i = 0; i < errorCorrectLength; i++) {
                    a = a.multiply(qrcode.polynomial([1, qrcode.gexp(i)], 0));
                }
                return a;
            };
            
            qrcode.polynomial = function(num, shift) {
                var _num = function() {
                    var offset = 0;
                    while (offset < num.length && num[offset] == 0) {
                        offset++;
                    }
                    var _num = new Array(num.length - offset + shift);
                    for (var i = 0; i < num.length - offset; i++) {
                        _num[i] = num[i + offset];
                    }
                    return _num;
                }();
                
                var _this = {};
                _this.getAt = function(index) {
                    return _num[index];
                };
                _this.getLength = function() {
                    return _num.length;
                };
                _this.multiply = function(e) {
                    var num = new Array(_this.getLength() + e.getLength() - 1);
                    for (var i = 0; i < _this.getLength(); i++) {
                        for (var j = 0; j < e.getLength(); j++) {
                            num[i + j] ^= qrcode.gexp(qrcode.glog(_this.getAt(i)) + qrcode.glog(e.getAt(j)));
                        }
                    }
                    return qrcode.polynomial(num, 0);
                };
                _this.mod = function(e) {
                    if (_this.getLength() - e.getLength() < 0) {
                        return _this;
                    }
                    var ratio = qrcode.glog(_this.getAt(0)) - qrcode.glog(e.getAt(0));
                    var num = new Array(_this.getLength());
                    for (var i = 0; i < _this.getLength(); i++) {
                        num[i] = _this.getAt(i);
                    }
                    for (var i = 0; i < e.getLength(); i++) {
                        num[i] ^= qrcode.gexp(qrcode.glog(e.getAt(i)) + ratio);
                    }
                    return (qrcode.polynomial(num, 0).mod(e));
                };
                return _this;
            };
            
            qrcode.glog = function(n) {
                if (n < 1) {
                    throw new Error('glog(' + n + ')');
                }
                return qrcode.LOG_TABLE[n];
            };
            
            qrcode.gexp = function(n) {
                while (n < 0) {
                    n += 255;
                }
                while (n >= 256) {
                    n -= 255;
                }
                return qrcode.EXP_TABLE[n];
            };
            
            qrcode.EXP_TABLE = new Array(256);
            qrcode.LOG_TABLE = new Array(256);
            for (var i = 0; i < 8; i++) {
                qrcode.EXP_TABLE[i] = 1 << i;
            }
            for (var i = 8; i < 256; i++) {
                qrcode.EXP_TABLE[i] = qrcode.EXP_TABLE[i - 4] ^ qrcode.EXP_TABLE[i - 5] ^ qrcode.EXP_TABLE[i - 6] ^ qrcode.EXP_TABLE[i - 8];
            }
            for (var i = 0; i < 255; i++) {
                qrcode.LOG_TABLE[qrcode.EXP_TABLE[i]] = i;
            }
            
            qrcode.getBCHTypeInfo = function(data) {
                var d = data << 10;
                while (qrcode.getBCHDigit(d) - qrcode.getBCHDigit(0x537) >= 0) {
                    d ^= (0x537 << (qrcode.getBCHDigit(d) - qrcode.getBCHDigit(0x537)));
                }
                return ((data << 10) | d) ^ 0x5412;
            };
            
            qrcode.getBCHTypeNumber = function(data) {
                var d = data << 12;
                while (qrcode.getBCHDigit(d) - qrcode.getBCHDigit(0x1f25) >= 0) {
                    d ^= (0x1f25 << (qrcode.getBCHDigit(d) - qrcode.getBCHDigit(0x1f25)));
                }
                return (data << 12) | d;
            };
            
            qrcode.getBCHDigit = function(data) {
                var digit = 0;
                while (data != 0) {
                    digit++;
                    data >>>= 1;
                }
                return digit;
            };
            
            qrcode.getPatternPosition = function(typeNumber) {
                return qrcode.PATTERN_POSITION_TABLE[typeNumber - 1];
            };
            
            qrcode.PATTERN_POSITION_TABLE = [
                [],
                [6, 18],
                [6, 22],
                [6, 26],
                [6, 30],
                [6, 34],
                [6, 22, 38],
                [6, 24, 42],
                [6, 26, 46],
                [6, 28, 50],
                [6, 30, 54],
                [6, 32, 58],
                [6, 34, 62],
                [6, 26, 46, 66],
                [6, 26, 48, 70],
                [6, 26, 50, 74],
                [6, 30, 54, 78],
                [6, 30, 56, 82],
                [6, 30, 58, 86],
                [6, 34, 62, 90],
                [6, 28, 50, 72, 94],
                [6, 26, 50, 74, 98],
                [6, 30, 54, 78, 102],
                [6, 28, 54, 80, 106],
                [6, 32, 58, 84, 110],
                [6, 30, 58, 86, 114],
                [6, 34, 62, 90, 118],
                [6, 26, 50, 74, 98, 122],
                [6, 30, 54, 78, 102, 126],
                [6, 26, 52, 78, 104, 130],
                [6, 30, 56, 82, 108, 134],
                [6, 34, 60, 86, 112, 138],
                [6, 30, 58, 86, 114, 142],
                [6, 34, 62, 90, 118, 146],
                [6, 30, 54, 78, 102, 126, 150],
                [6, 24, 50, 76, 102, 128, 154],
                [6, 28, 54, 80, 106, 132, 158],
                [6, 32, 58, 84, 110, 136, 162],
                [6, 26, 54, 82, 110, 138, 166],
                [6, 30, 58, 86, 114, 142, 170]
            ];
            
            qrcode.bitBuffer = function() {
                var _buffer = [];
                var _length = 0;
                var _this = {};
                _this.getBuffer = function() {
                    return _buffer;
                };
                _this.getAt = function(index) {
                    var bufIndex = Math.floor(index / 8);
                    return ((_buffer[bufIndex] >>> (7 - index % 8)) & 1) == 1;
                };
                _this.put = function(num, length) {
                    for (var i = 0; i < length; i++) {
                        _this.putBit(((num >>> (length - i - 1)) & 1) == 1);
                    }
                };
                _this.getLengthInBits = function() {
                    return _length;
                };
                _this.putBit = function(bit) {
                    var bufIndex = Math.floor(_length / 8);
                    if (_buffer.length <= bufIndex) {
                        _buffer.push(0);
                    }
                    if (bit) {
                        _buffer[bufIndex] |= (0x80 >>> (_length % 8));
                    }
                    _length++;
                };
                _this.buffer = _buffer;
                return _this;
            };
            
            window.QRCode = QRCode;
        })();

        // Funci√≥n para generar el formato WiFi QR
        function generateWiFiQR(ssid, password, security, hidden) {
            // Formato est√°ndar: WIFI:T:WPA;S:SSID;P:password;;
            let qrText = 'WIFI:T:';
            
            if (security === 'nopass') {
                qrText += 'nopass;';
            } else {
                qrText += security + ';';
            }
            
            qrText += 'S:' + ssid + ';';
            
            if (security !== 'nopass') {
                qrText += 'P:' + password + ';';
            }
            
            if (hidden) {
                qrText += 'H:true;';
            }
            
            qrText += ';;';
            
            return qrText;
        }

        // Manejar el formulario
        document.getElementById('wifiForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const ssid = document.getElementById('ssid').value;
            const password = document.getElementById('password').value;
            const security = document.getElementById('security').value;
            const hidden = document.getElementById('hidden').checked;
            
            if (!ssid) {
                alert('Por favor, ingresa el nombre de la red WiFi');
                return;
            }
            
            if (security !== 'nopass' && !password) {
                alert('Por favor, ingresa la contrase√±a de la red WiFi');
                return;
            }
            
            const qrText = generateWiFiQR(ssid, password, security, hidden);
            const qrContainer = document.getElementById('qrContainer');
            const qrElement = document.getElementById('qrcode');
            const wifiInfo = document.getElementById('wifiInfo');
            
            // Generar QR usando librer√≠a inline (sin dependencias externas)
            new QRCode(qrElement, {
                text: qrText,
                width: 300,
                height: 300,
                correctLevel: 'M'
            });
            
            // Mostrar informaci√≥n de la WiFi
            wifiInfo.innerHTML = `
                <p><strong>Nombre de la red:</strong> ${ssid}</p>
                <p><strong>Contrase√±a:</strong> ${password || 'Sin contrase√±a'}</p>
                <p><strong>Tipo de seguridad:</strong> ${security === 'nopass' ? 'Sin contrase√±a' : security}</p>
                ${hidden ? '<p><strong>Red oculta:</strong> S√≠</p>' : ''}
            `;
            
            qrContainer.classList.add('active');
        });

        // Funci√≥n para imprimir
        function printQR() {
            const paperSize = document.getElementById('paperSize').value.toLowerCase();
            const container = document.querySelector('.container');
            const body = document.body;
            
            // Aplicar clase seg√∫n el tama√±o de papel
            container.className = 'container page-' + paperSize;
            body.className = 'page-' + paperSize;
            
            // Crear estilo din√°mico para @page
            let style = document.getElementById('print-page-style');
            if (!style) {
                style = document.createElement('style');
                style.id = 'print-page-style';
                document.head.appendChild(style);
            }
            
            // Aplicar tama√±o de p√°gina seg√∫n selecci√≥n
            let pageSize = 'auto';
            if (paperSize === 'a4') {
                pageSize = 'A4';
            } else if (paperSize === 'a5') {
                pageSize = 'A5';
            } else if (paperSize === 'letter') {
                pageSize = 'letter';
            }
            
            style.textContent = '@media print { @page { size: ' + pageSize + '; margin: 0; } }';
            
            // Esperar un momento para que se apliquen los estilos
            setTimeout(() => {
                window.print();
                // Restaurar despu√©s de imprimir
                setTimeout(() => {
                    body.className = '';
                }, 100);
            }, 100);
        }
    </script>
</body>
</html>
